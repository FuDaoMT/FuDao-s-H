<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤é“çš„å°å±‹ğŸ›–</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Fredoka for a playful, rounded look (supporting basic latin, fallback to sans-serif for CN) -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            /* Prioritize system Chinese fonts for better rendering */
            font-family: 'Fredoka', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(180deg, #4fd1c5 0%, #2c7a7b 100%);
            color: #1a202c;
            overflow-x: hidden; /* Prevent horizontal scroll */
            user-select: none; /* Prevent text selection for app-like feel */
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #2c7a7b;
        }
        ::-webkit-scrollbar-thumb {
            background: #81e6d9;
            border-radius: 5px;
        }

        /* Floating Animation for Home Screen */
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }
        .float-anim {
            animation: float 4s ease-in-out infinite;
        }

        /* Bubble Animation */
        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            pointer-events: none;
            animation: rise linear infinite;
        }
        @keyframes rise {
            0% { bottom: -50px; opacity: 0; transform: scale(0.5); }
            50% { opacity: 0.6; }
            100% { bottom: 100vh; opacity: 0; transform: scale(1.2); }
        }

        /* Game Elements */
        #game-canvas {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 1rem;
            cursor: crosshair;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
        }

        /* Drawing Canvas */
        #draw-canvas {
            background: white;
            border-radius: 1rem;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="%23000" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>') 0 24, auto;
            touch-action: none; /* Critical for touch drawing */
        }

        .nav-btn.active {
            background-color: #fbbf24; /* Amber-400 */
            transform: scale(1.1);
            border-color: #f59e0b;
        }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="min-h-screen flex flex-col relative">

    <!-- Background Bubbles (Generated by JS) -->
    <div id="bubble-container" class="fixed inset-0 pointer-events-none z-0"></div>

    <!-- Navigation -->
    <nav class="bg-white/90 backdrop-blur-sm sticky top-0 z-50 shadow-lg border-b-4 border-teal-600">
        <div class="max-w-4xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="text-2xl font-bold text-teal-600 flex items-center gap-2">
                <i class="fa-solid fa-house-chimney"></i> å¤é“çš„å°å±‹
            </div>
            <div class="flex gap-2 sm:gap-4">
                <button onclick="showSection('home')" class="nav-btn active px-3 py-2 sm:px-4 sm:py-2 rounded-full bg-teal-100 text-teal-700 font-bold transition-all border-b-4 border-teal-300 hover:bg-teal-200 text-sm sm:text-base">
                    <i class="fa-solid fa-house"></i> ä¸»é¡µ
                </button>
                <button onclick="showSection('learn')" class="nav-btn px-3 py-2 sm:px-4 sm:py-2 rounded-full bg-blue-100 text-blue-700 font-bold transition-all border-b-4 border-blue-300 hover:bg-blue-200 text-sm sm:text-base">
                    <i class="fa-solid fa-book-open"></i> å­¦ä¹ 
                </button>
                <button onclick="showSection('play')" class="nav-btn px-3 py-2 sm:px-4 sm:py-2 rounded-full bg-purple-100 text-purple-700 font-bold transition-all border-b-4 border-purple-300 hover:bg-purple-200 text-sm sm:text-base">
                    <i class="fa-solid fa-gamepad"></i> æ¸¸æˆ
                </button>
                <button onclick="showSection('draw')" class="nav-btn px-3 py-2 sm:px-4 sm:py-2 rounded-full bg-pink-100 text-pink-700 font-bold transition-all border-b-4 border-pink-300 hover:bg-pink-200 text-sm sm:text-base">
                    <i class="fa-solid fa-paintbrush"></i> ç»˜ç”»
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow relative z-10 container mx-auto px-4 py-6 max-w-4xl">

        <!-- HOME SECTION -->
        <section id="home" class="text-center py-10">
            <div class="float-anim text-9xl mb-8 filter drop-shadow-lg">ğŸ›–</div>
            <h1 class="text-4xl md:text-6xl font-bold text-white mb-4 text-shadow">æ¬¢è¿æ¥åˆ°å¤é“çš„å°å±‹ï¼</h1>
            <p class="text-xl text-teal-100 mb-10 font-semibold">å‡†å¤‡å¥½å¼€å§‹ä¸€åœºå¥‡å¦™çš„æ¢é™©äº†å—ï¼Ÿ</p>
            
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                <div onclick="showSection('learn')" class="bg-white p-6 rounded-2xl shadow-xl cursor-pointer transform transition hover:scale-105 border-b-8 border-blue-400">
                    <div class="text-5xl mb-4">ğŸ </div>
                    <h3 class="text-2xl font-bold text-blue-500">è®¤è¯†åŠ¨ç‰©</h3>
                    <p class="text-gray-500">å¥½å¤šæœ‰è¶£çš„æµ·æ´‹ç”Ÿç‰©ï¼</p>
                </div>
                <div onclick="showSection('play')" class="bg-white p-6 rounded-2xl shadow-xl cursor-pointer transform transition hover:scale-105 border-b-8 border-purple-400">
                    <div class="text-5xl mb-4">ğŸˆ</div>
                    <h3 class="text-2xl font-bold text-purple-500">æˆ³æ³¡æ³¡</h3>
                    <p class="text-gray-500">ç©ä¸ªæœ‰è¶£çš„æ¸¸æˆï¼</p>
                </div>
                <div onclick="showSection('draw')" class="bg-white p-6 rounded-2xl shadow-xl cursor-pointer transform transition hover:scale-105 border-b-8 border-pink-400">
                    <div class="text-5xl mb-4">ğŸ¨</div>
                    <h3 class="text-2xl font-bold text-pink-500">å°å°ç”»å®¤</h3>
                    <p class="text-gray-500">å°½æƒ…æ¶‚é¸¦ä¸Šè‰²ï¼</p>
                </div>
            </div>
        </section>

        <!-- LEARN SECTION -->
        <section id="learn" class="hidden">
            <h2 class="text-3xl font-bold text-white mb-6 text-center"><i class="fa-solid fa-graduation-cap"></i> æµ·æ´‹æœ‹å‹ä»¬</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-6" id="facts-container">
                <!-- Cards injected by JS -->
            </div>
        </section>

        <!-- PLAY SECTION -->
        <section id="play" class="hidden flex flex-col items-center">
            <h2 class="text-3xl font-bold text-white mb-4"><i class="fa-solid fa-star"></i> æ³¡æ³¡å¤§ä½œæˆ˜ï¼</h2>
            <div class="bg-white/20 p-4 rounded-xl backdrop-blur-sm w-full max-w-lg shadow-2xl">
                <div class="flex justify-between text-white font-bold text-xl mb-2">
                    <span>å¾—åˆ†: <span id="score">0</span></span>
                    <span>æ—¶é—´: <span id="timer">30</span>ç§’</span>
                </div>
                <canvas id="game-canvas" width="600" height="400" class="w-full h-auto bg-blue-900 rounded-lg shadow-inner"></canvas>
                <button id="start-game-btn" onclick="startGame()" class="w-full mt-4 bg-yellow-400 hover:bg-yellow-300 text-yellow-900 font-bold py-3 rounded-xl border-b-4 border-yellow-600 transition-all text-xl">
                    å¼€å§‹æ¸¸æˆï¼
                </button>
            </div>
            <p class="text-white mt-4 bg-teal-800/50 px-4 py-2 rounded-lg text-sm">ç‚¹å‡»æ³¡æ³¡ï¼Œåˆ«è®©å®ƒä»¬é£èµ°å•¦ï¼</p>
        </section>

        <!-- DRAW SECTION -->
        <section id="draw" class="hidden flex flex-col items-center">
            <h2 class="text-3xl font-bold text-white mb-4"><i class="fa-solid fa-palette"></i> åˆ›æ„ç”»æ¿</h2>
            <div class="bg-white p-4 rounded-xl shadow-2xl w-full max-w-2xl">
                <div class="flex flex-wrap justify-center gap-2 mb-4" id="color-palette">
                    <!-- Colors -->
                    <button onclick="setColor('#000000')" class="w-10 h-10 rounded-full bg-black border-2 border-gray-200 transform hover:scale-110"></button>
                    <button onclick="setColor('#ef4444')" class="w-10 h-10 rounded-full bg-red-500 border-2 border-gray-200 transform hover:scale-110"></button>
                    <button onclick="setColor('#f97316')" class="w-10 h-10 rounded-full bg-orange-500 border-2 border-gray-200 transform hover:scale-110"></button>
                    <button onclick="setColor('#eab308')" class="w-10 h-10 rounded-full bg-yellow-500 border-2 border-gray-200 transform hover:scale-110"></button>
                    <button onclick="setColor('#22c55e')" class="w-10 h-10 rounded-full bg-green-500 border-2 border-gray-200 transform hover:scale-110"></button>
                    <button onclick="setColor('#3b82f6')" class="w-10 h-10 rounded-full bg-blue-500 border-2 border-gray-200 transform hover:scale-110"></button>
                    <button onclick="setColor('#a855f7')" class="w-10 h-10 rounded-full bg-purple-500 border-2 border-gray-200 transform hover:scale-110"></button>
                    <div class="w-0.5 h-10 bg-gray-200 mx-1"></div>
                    <button onclick="setEraser()" class="px-4 py-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-bold border-2 border-gray-300 flex items-center gap-2">
                        <i class="fa-solid fa-eraser"></i> æ©¡çš®æ“¦
                    </button>
                    <button onclick="clearCanvas()" class="px-4 py-2 rounded-full bg-red-100 hover:bg-red-200 text-red-700 font-bold border-2 border-red-300 flex items-center gap-2">
                        <i class="fa-solid fa-trash"></i> æ¸…ç©º
                    </button>
                </div>
                <div class="relative w-full" style="padding-bottom: 75%;"> <!-- 4:3 Aspect Ratio Container -->
                    <canvas id="draw-canvas" class="absolute top-0 left-0 w-full h-full border-4 border-dashed border-gray-300 rounded-lg"></canvas>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center p-4 text-teal-100 text-sm mt-8">
        <p>ç”¨ ğŸ’™ ä¸ºæœªæ¥çš„æ¢ç´¢è€…åˆ¶ä½œï¼</p>
    </footer>

    <script>
        // --- Navigation Logic ---
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('main > section').forEach(el => el.classList.add('hidden'));
            // Show target section
            document.getElementById(sectionId).classList.remove('hidden');
            
            // Update buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
                if(btn.textContent.toLowerCase().includes(sectionId === 'home' ? 'ä¸»é¡µ' : sectionId === 'learn' ? 'å­¦ä¹ ' : sectionId === 'play' ? 'æ¸¸æˆ' : 'ç»˜ç”»')) {
                    btn.classList.add('active');
                }
            });

            // Specific initialization
            if (sectionId === 'draw') resizeCanvas();
            if (sectionId !== 'play') stopGame();
        }

        // --- Background Bubbles ---
        function createBubbles() {
            const container = document.getElementById('bubble-container');
            const bubbleCount = 15;
            for(let i=0; i<bubbleCount; i++) {
                const bubble = document.createElement('div');
                bubble.classList.add('bubble');
                const size = Math.random() * 60 + 20;
                bubble.style.width = `${size}px`;
                bubble.style.height = `${size}px`;
                bubble.style.left = `${Math.random() * 100}vw`;
                bubble.style.animationDuration = `${Math.random() * 10 + 5}s`;
                bubble.style.animationDelay = `${Math.random() * 5}s`;
                container.appendChild(bubble);
            }
        }
        createBubbles();

        // --- Learn Section Data (Translated) ---
        const animals = [
            { emoji: 'ğŸ™', name: 'ç« é±¼', color: 'purple', fact: 'ç« é±¼æœ‰ä¸‰é¢—å¿ƒè„å’Œè“è‰²çš„è¡€æ¶²ï¼' },
            { emoji: 'ğŸ¬', name: 'æµ·è±š', color: 'blue', fact: 'æµ·è±šéå¸¸èªæ˜ï¼Œè¿˜å–œæ¬¢ç©ä¼ çƒæ¸¸æˆã€‚' },
            { emoji: 'ğŸ¢', name: 'æµ·é¾Ÿ', color: 'green', fact: 'æµ·é¾Ÿå¯ä»¥æ´»åˆ°100å¤šå²å“¦ã€‚' },
            { emoji: 'ğŸ¦€', name: 'èƒèŸ¹', color: 'red', fact: 'èƒèŸ¹æ˜¯æ¨ªç€èµ°çš„ï¼Œè€Œä¸”æœ‰åšç¡¬çš„å£³ã€‚' },
            { emoji: 'ğŸ¦ˆ', name: 'é²¨é±¼', color: 'gray', fact: 'é²¨é±¼æ²¡æœ‰éª¨å¤´ï¼Œå…¨éƒ½æ˜¯è½¯éª¨ï¼' },
            { emoji: 'ğŸ¡', name: 'æ²³è±š', color: 'yellow', fact: 'æ²³è±šå—åˆ°æƒŠå“æ—¶ä¼šåƒæ°”çƒä¸€æ ·é¼“èµ·æ¥ã€‚' }
        ];

        const factsContainer = document.getElementById('facts-container');
        animals.forEach(animal => {
            const card = document.createElement('div');
            card.className = `bg-white p-6 rounded-2xl shadow-lg flex items-center gap-4 card-hover border-l-8 border-${animal.color}-400`;
            card.innerHTML = `
                <div class="text-6xl bg-${animal.color}-50 p-4 rounded-full">${animal.emoji}</div>
                <div>
                    <h3 class="text-2xl font-bold text-gray-800">${animal.name}</h3>
                    <p class="text-gray-600 mt-1">${animal.fact}</p>
                </div>
            `;
            factsContainer.appendChild(card);
        });

        // --- Game Logic (Bubble Pop) ---
        const gameCanvas = document.getElementById('game-canvas');
        const gCtx = gameCanvas.getContext('2d');
        let score = 0;
        let timeLeft = 30;
        let gameInterval;
        let spawnInterval;
        let gameBubbles = [];
        let isPlaying = false;

        // Resize game canvas logic would go here for responsiveness, 
        // but for simplicity we keep fixed internal resolution and scale via CSS.
        
        function startGame() {
            if(isPlaying) return;
            isPlaying = true;
            score = 0;
            timeLeft = 30;
            gameBubbles = [];
            document.getElementById('score').innerText = score;
            document.getElementById('timer').innerText = timeLeft;
            document.getElementById('start-game-btn').classList.add('hidden');

            gameInterval = setInterval(updateGame, 1000/60); // 60 FPS
            spawnInterval = setInterval(spawnGameBubble, 800);
            
            // Timer
            const timerInt = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').innerText = timeLeft;
                if(timeLeft <= 0 || !isPlaying) {
                    clearInterval(timerInt);
                    endGame();
                }
            }, 1000);
        }

        function stopGame() {
            isPlaying = false;
            clearInterval(gameInterval);
            clearInterval(spawnInterval);
            document.getElementById('start-game-btn').classList.remove('hidden');
        }

        function endGame() {
            stopGame();
            // Draw Game Over text
            gCtx.fillStyle = "rgba(0,0,0,0.5)";
            gCtx.fillRect(0,0,gameCanvas.width, gameCanvas.height);
            gCtx.fillStyle = "#fff";
            gCtx.font = "bold 40px Fredoka, sans-serif";
            gCtx.textAlign = "center";
            gCtx.fillText("æ¸¸æˆç»“æŸ!", gameCanvas.width/2, gameCanvas.height/2 - 20);
            gCtx.font = "30px Fredoka, sans-serif";
            gCtx.fillText(`å¾—åˆ†: ${score}`, gameCanvas.width/2, gameCanvas.height/2 + 30);
        }

        function spawnGameBubble() {
            const radius = Math.random() * 20 + 15;
            const x = Math.random() * (gameCanvas.width - radius * 2) + radius;
            const speed = Math.random() * 2 + 1;
            const hue = Math.random() * 360;
            gameBubbles.push({ x, y: gameCanvas.height + radius, radius, speed, hue });
        }

        function updateGame() {
            gCtx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
            
            // Draw and move bubbles
            for (let i = 0; i < gameBubbles.length; i++) {
                let b = gameBubbles[i];
                b.y -= b.speed;
                
                // Draw Bubble
                gCtx.beginPath();
                gCtx.arc(b.x, b.y, b.radius, 0, Math.PI * 2);
                gCtx.fillStyle = `hsla(${b.hue}, 70%, 60%, 0.8)`;
                gCtx.fill();
                gCtx.lineWidth = 2;
                gCtx.strokeStyle = `hsla(${b.hue}, 70%, 80%, 1)`;
                gCtx.stroke();
                
                // Shine
                gCtx.beginPath();
                gCtx.arc(b.x - b.radius*0.3, b.y - b.radius*0.3, b.radius*0.2, 0, Math.PI * 2);
                gCtx.fillStyle = "rgba(255,255,255,0.6)";
                gCtx.fill();

                // Remove if off screen
                if (b.y < -50) {
                    gameBubbles.splice(i, 1);
                    i--;
                }
            }
        }

        // Click/Touch to Pop
        function handleInput(e) {
            if(!isPlaying) return;
            
            const rect = gameCanvas.getBoundingClientRect();
            // Calculate scale factor in case canvas is resized by CSS
            const scaleX = gameCanvas.width / rect.width;
            const scaleY = gameCanvas.height / rect.height;

            let clientX = e.clientX;
            let clientY = e.clientY;
            
            // Handle touch
            if(e.type === 'touchstart') {
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
                e.preventDefault(); // prevent scrolling
            }

            const x = (clientX - rect.left) * scaleX;
            const y = (clientY - rect.top) * scaleY;

            for (let i = gameBubbles.length - 1; i >= 0; i--) {
                let b = gameBubbles[i];
                const dist = Math.sqrt((x - b.x) ** 2 + (y - b.y) ** 2);
                if (dist < b.radius + 10) { // +10 for generous hit area
                    gameBubbles.splice(i, 1);
                    score += 10;
                    document.getElementById('score').innerText = score;
                    // Pop effect could go here
                    break; 
                }
            }
        }

        gameCanvas.addEventListener('mousedown', handleInput);
        gameCanvas.addEventListener('touchstart', handleInput, {passive: false});

        // --- Drawing Canvas Logic ---
        const drawCanvas = document.getElementById('draw-canvas');
        const dCtx = drawCanvas.getContext('2d');
        let painting = false;
        let currentColor = '#000000';
        let currentSize = 5;

        function resizeCanvas() {
            // Match internal resolution to CSS display size for sharp drawing
            const parent = drawCanvas.parentElement;
            drawCanvas.width = parent.clientWidth;
            drawCanvas.height = parent.clientHeight;
            // Restore context settings after resize
            dCtx.lineCap = 'round';
            dCtx.lineJoin = 'round';
            dCtx.strokeStyle = currentColor;
            dCtx.lineWidth = currentSize;
        }
        
        // Initial setup
        window.addEventListener('resize', () => {
             // Only resize if drawing section is active to avoid clearing content unexpectedly
             if(!document.getElementById('draw').classList.contains('hidden')) {
                 // Note: Resizing clears canvas. In a real app, we'd save the image data.
             }
        });

        function startPosition(e) {
            painting = true;
            draw(e);
        }

        function endPosition() {
            painting = false;
            dCtx.beginPath();
        }

        function draw(e) {
            if (!painting) return;
            
            e.preventDefault(); // Prevent scrolling on touch
            
            const rect = drawCanvas.getBoundingClientRect();
            let x, y;

            if (e.type.includes('touch')) {
                x = e.touches[0].clientX - rect.left;
                y = e.touches[0].clientY - rect.top;
            } else {
                x = e.clientX - rect.left;
                y = e.clientY - rect.top;
            }

            dCtx.lineWidth = currentSize;
            dCtx.lineCap = 'round';
            dCtx.strokeStyle = currentColor;

            dCtx.lineTo(x, y);
            dCtx.stroke();
            dCtx.beginPath();
            dCtx.moveTo(x, y);
        }

        drawCanvas.addEventListener('mousedown', startPosition);
        drawCanvas.addEventListener('mouseup', endPosition);
        drawCanvas.addEventListener('mousemove', draw);
        
        drawCanvas.addEventListener('touchstart', startPosition, {passive: false});
        drawCanvas.addEventListener('touchend', endPosition);
        drawCanvas.addEventListener('touchmove', draw, {passive: false});

        function setColor(color) {
            currentColor = color;
            currentSize = 5;
        }

        function setEraser() {
            currentColor = '#ffffff';
            currentSize = 20;
        }

        function clearCanvas() {
            dCtx.clearRect(0, 0, drawCanvas.width, drawCanvas.height);
        }

    </script>
</body>
</html>


